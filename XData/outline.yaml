
(documentToNode): # given string
    loop:
        (commentOrEndOfLineToNode): #DONE
            (commentToNode): #DONE
                regex: "/ */"
                regex: "/# /"
                regex: "/.+/"
                regex: "/\n|\z/"
            (blankLineToNode): #DONE
                regex: "/ *(\n|\z)/"
        
    oneOf:
        (nothing):
            note: equivlent to a list with null as the first element
        (listToNode):
            loop:
                oneOf:
                    (commentOrEndOfLineToNode):
                    group:
                        regex: "/- /"
                        (listValueToNode):
                            oneOf:
                                (inlineValueToNode):
                                    (emptyMapToNode): #DONE
                                        regex: "/ */"
                                        regex: "/\{/"
                                        regex: "/ */"
                                        regex: "/\}/"
                                        regex: "/ */"
                                    (emptyListToNode): #DONE
                                        regex: "/ */"
                                        regex: "/\[/"
                                        regex: "/ */"
                                        regex: "/\]/"
                                        regex: "/ */"
                                    (SpecialValues): #DONE
                                        regex: "/true|false|infinite|infinity|-infinite|-infinity|NaN|nullptr|null|nil|none|undefined/i"
                                    (Number): #DONE
                                        regex: "/(-|+)?/"
                                        regex: "/\d+(\.\d+)?/"
                                    (AtomValue): #DONE
                                        regex: "/@-?[a-zA-Z_][a-zA-Z_0-9]*/"
                                    (SystemCharacter):
                                        oneOf:
                                            regex: "/#tab|#newline/"
                                            regex: "/#unicode\[\w+\]/"
                                            regex: "/#ascii\[\w+\]/"
                                    (String):
                                        (StringLiteral): #DONE
                                            oneOf:
                                                regex: '/"/'
                                                regex: '/[^\n"]*/'
                                                regex: '/"/'
                                                group:
                                                    findDoubleQuotesThatAreAPerfectCube:
                                                    loop:
                                                        oneOf:
                                                            a sequence of double quotes thats smaller than the starting quote: 
                                                            as many characters as possible that don't have the quote or newline:
                                                    findMatchingDoubleQuotesThatAreAPerfectCube:
                                        (StringFigurative):
                                            findSingleQuotesThatAreAPerfectCube:
                                            loop:
                                                stop_if:
                                                    findMatchingSingleQuotesThatAreAPerfectCube:
                                                oneOf:
                                                    regex: /[^{]+/ # note: exclude \n as well when in a key or reference context
                                                    (escapeSectionToNode):
                                                        regex: /{/
                                                        (SystemCharacter):
                                                        (Reference):
                                                            regex: "/#valueOf/"
                                                            regex: "/\[/"
                                                                loop:
                                                                    regex: "/ */"
                                                                    (keyToNode):
                                                                        oneOf:
                                                                            (ValueOfAKey): #DONE
                                                                                oneOf:
                                                                                    (SpecialValues):
                                                                                    (Number):
                                                                                    (AtomValue):
                                                                                    (SystemCharacter):
                                                                                    (String): #recursion
                                                                                    (Reference): # also recursion
                                                                            (KeyAndAdjective): #DONE
                                                                                (CustomAdjectives): #DONE
                                                                                    regex: "/\(/"
                                                                                    loop:
                                                                                        (Adjective): #DONE
                                                                                            regex: "/ */"
                                                                                            regex: "/[a-zA-Z_][a-zA-Z_0-9]*/"
                                                                                            regex: "/ */"
                                                                                            regex: "/,/"
                                                                                    regex: "/\)/"
                                                                                    regex: "/ +| *$/"
                                                                                (ValueOfAKey):
                                                                    regex: / */
                                                                    regex: /,/
                                                            regex: "/ */"
                                                            regex: "/\]/"
                                                        regex: "/ */"
                                                        regex: /}/
                                    (Reference):
                                (lineOverlapValueToNode):
                                    oneOf:
                                        (stringBlockToNode):
                                            (stringLiteralMultilineQuoteToNode):
                                                findDoubleQuotesThatAreAPerfectCube:
                                                (commentOrEndOfLineToNode):
                                                loop:
                                                    regex: '/ +[^"\n]*/'
                                                    regex: "/\n|\z/"
                                                    
                                                findMatchingDoubleQuotesThatAreAPerfectCube:
                                                (commentOrEndOfLineToNode):
                                            
                                            (stringFigurativeMultilineQuoteToNode):
                                                findSingleQuotesThatAreAPerfectCube:
                                                (commentOrEndOfLineToNode):
                                                loop:
                                                    regex: "/ +/" # make sure line is somewhat indented
                                                    oneOf:
                                                        regex: "/[^\{\n]*/"
                                                        (escapeSectionToNode): # note: only single line escapes
                                                    regex: "/\n|\z/"
                                                findMatchingSingleQuotesThatAreAPerfectCube:
                                                (commentOrEndOfLineToNode):
                                            
                                        (customValueToNode):
                                            (customAttributesToNode):
                                            regex: /.+/
                                            find indented block:
                                
                                (nextLineValueToNode):
                                    (commentOrEndOfLineToNode):
                                    get indented block:
                                        oneOf:
                                            (mapToNode):
                                                loop:
                                                    oneOf:
                                                        (commentOrEndOfLineToNode):
                                                        group:
                                                            (keyToNode):
                                                                (keyValueToNode):
                                                                regex: "/ */"
                                                                regex: "/:/"
                                                            (listValueToNode):
                                            (listToNode):
                                            (nextLineInlineValue):
                                                loop:
                                                    (commentOrEndOfLineToNode):
                                                (inlineValueToNode):
    loop:
        (commentOrEndOfLineToNode):
            (commentToNode):
                regex: "/ */"
                regex: "/# /"
                regex: "/.+/"
                regex: "/\n|\z/"
            (blankLineToNode):
                regex: "/ *(\n|\z)/"

# todo: consider #this.file
# todo: consider #this.file.folder
# todo: consider #this.arguments
# todo: consider units
    # e.g. 100kilos
    # todo: consider units, e.g. 100 e10
    # ~grams~ 100: ~number(integer(base8))~ DEAD lbs_of_beef
    # ~grams~ 100: ~number~ 12.1343e100